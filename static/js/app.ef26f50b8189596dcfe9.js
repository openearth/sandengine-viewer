webpackJsonp([1],{"7zck":function(t,e){},ACB5:function(t,e){},NHnr:function(t,e,a){"use strict";function s(t){a("Zn8a")}function n(t,e){var a={id:"aeolian-layer",active:!0,visibility:"visible",name:"Aeolian",type:"circle",cursor:"pointer",icon:"grain",source:{type:"geojson",data:"/static/aeolian_data.geojson"},paint:{"circle-radius":{base:1.75,stops:[[12,2],[22,180]]},"circle-color":["match",["get","deploymentName"],"dn1","#fbb03b","dn2","#223b53","dn3","#e55e5e","dn4","#3bb2d0","dn5","#956a37","dn6","#8a5f2c","dn7","#815726","dn8","#724c20","dn9","#66451f","dn10","#2f1b02","dn11","#201503","dn67","#453c09","#ccc"]}};t.addLayer(a),e.push(a),f.$emit("select-layers",e)}function o(t,e){var a=t.properties.deploymentName,s=t.properties.location_ID,n=U.a.unix(parseFloat(t.properties.timeEnd)),o=U.a.unix(parseFloat(t.properties.timeStart));fetch("https://s3-eu-west-1.amazonaws.com/deltares-opendata/zandmotor/aeolian/aeolian_data_"+a+".json").then(function(t){return t.json()}).then(function(r){s=s,a=a,r=r,n=n.format("L"),o=o.format("L"),i(s,a,r,n,o,t,e)}).catch(function(t){console.warn(t)})}function i(t,e,a,s,n,o,i){if(null==a)return console.log("No timeseries defined"),-1;var r=document.getElementById(i);r.innerHTML="";var l=Bokeh.Plotting,c=a[e],d=$()(c),m=c[d[0]],u=m.length,p=[];_.each(m.slice(0,u),function(t){p.push(new Date(t))});for(var h=new l.figure({title:"Deployment: "+e+" Location: "+t+"\n Start deployment: "+n+" End deployment: "+s,tools:"pan,crosshair,wheel_zoom,box_zoom,reset,save",width:1e3,height:350,x_axis_type:"datetime",x_axis_label:"Time",y_axis_label:"Number of particles [-]",background_fill_color:"#F2F2F7"}),v=c[t],f=$()(v),j=["#666699","#66ff66","#ff6666"],y=0;y<f.length;y++){var g=function(t,e,a){return b[e]>0},b=(v[f[y]].height,c[t][f[y]].particle_counts);b=b.slice(0,u);var w=p.filter(g),k=b.filter(g),x=new Bokeh.ColumnDataSource({data:{x:w,y:k}}),z=new Bokeh.Line({x:{field:"x"},y:{field:"y"},line_color:j[y],line_width:2});h.add_glyph(z,x)}var F=new Bokeh.Document;F.add_root(h),Bokeh.embed.add_document_standalone(F,r)}function r(t,e){console.log("addmeteo",e),fetch("static/wind_data.json").then(function(t){return t.json()}).then(function(a){c(a,e,t),d(a)})}function l(t){var e=this;fetch("https://s3-eu-west-1.amazonaws.com/deltares-opendata/zandmotor/meteo/meteo_data.json").then(function(t){return t.json()}).then(function(a){e.bokehplot("Barometer_Avg",document.getElementById(t[0]),a),e.bokehplot("WindSpeed_Avg",document.getElementById(t[1]),a),e.bokehplot("RelHumidity_Avg",document.getElementById(t[2]),a)}).catch(function(t){console.warn(t)})}function c(t,e,a){var s=t.lat,n=t.lon,o={name:"Meteo",active:!1,visibility:"none",id:"meteo-layer",type:"raster",icon:"filter_drama",source:{type:"canvas",animate:!0,canvas:"windsock-canvas",coordinates:[[n-.003,s+.003],[n+.003,s+.003],[n+.003,s-.003],[n-.003,s-.003]]},paint:{}};a.addLayer(o),e.push(o),f.$emit("select-layers",e),console.log("check",e)}function d(t){function e(){var s=t.direc,n=t.aspeed[a],o=document.getElementById("windsock-canvas").getContext("2d"),i=100;o.clearRect(0,0,200,200),o.shadowColor="#333",o.shadowBlur=10,o.shadowOffsetX=5,o.shadowOffsetY=5,o.beginPath(),o.arc(i,i,10,0,2*Math.PI),o.fillStyle="black",o.fill(),o.closePath(),o.beginPath(),o.moveTo(80,80),o.lineTo(i,i),o.lineTo(120,80),o.stroke(),o.closePath();var r=[[0,80,70,40,10,"red"],[2,80,60,40,10,"white"],[4,80,50,40,10,"red"],[6,80,40,40,10,"white"],[8,80,30,40,10,"red"]],l=_.filter(r,function(t){var e=t[0];return n>e});_.each(l,function(t){o.beginPath(),o.fillStyle=t[5],o.rect(t[1],t[2],t[3],t[4]),o.fill(),o.closePath()}),o.translate(100,100),o.rotate(-(180-s[a-1])*(2*Math.PI/360)),o.rotate((180-s[a])*(2*Math.PI/360)),o.translate(-100,-100),a+=1;var c=new Date(t.time[a]),d="Time step: "+c.toString();document.getElementById("message").innerHTML=d,requestAnimationFrame(e)}var a=0;e()}function m(t,e){var a={name:"Morphology",active:!1,visibility:"None",icon:"terrain",id:"measurements",type:"circle",source:{type:"geojson",data:"static/sediment_data.geojson"},paint:{"circle-color":"#52A8B4","circle-opacity":.5}};t.addLayer(a),e.push(a),f.$emit("select-layers",e)}function u(t){a("ACB5")}Object.defineProperty(e,"__esModule",{value:!0});var p=a("7+uW"),h=a("3EgV"),v=a.n(h),f=new p.a,j=(a("uTBe"),a("M4fF")),y=a.n(j),g={name:"layer-control",props:{layers:{type:Array,required:!0},map:{type:Object}},data:function(){return{}},mounted:function(){console.log("mounted layer-control",this)},watch:{layers:{handler:function(t){this.toggleLayers()},deep:!0}},methods:{toggleLayers:function(){var t=this;console.log("toggling with map",this,this.map,this.layers),y.a.isNil(this.map)||y.a.each(this.layers,function(e){var a="none";e.active&&(a="visible"),"group"===e.type?y.a.each(e.data,function(e){t.map.setLayoutProperty(e.id,"visibility",a)}):t.map.setLayoutProperty(e.id,"visibility",a)})}}},b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layer-control"},[a("v-list",{attrs:{dense:"","pt-0":""}},t._l(t.layers,function(e){return a("v-list-tile",{key:e.id},[a("v-list-tile-action",[a("v-switch",{model:{value:e.active,callback:function(a){t.$set(e,"active",a)},expression:"layer.active"}})],1),t._v(" "),a("v-list-tile-title",[t._v(t._s(e.name))]),t._v(" "),a("v-list-tile-action",[a("v-icon",[t._v(t._s(e.icon))])],1)],1)}))],1)},w=[],k={render:b,staticRenderFns:w},x=k,z=a("VU/8"),F=z(g,x,!1,null,null,null),L=F.exports,P=a("d7EF"),B=a.n(P),E={name:"morphology-canvas",data:function(){return{baseUrl:"https://s3-eu-west-1.amazonaws.com/deltares-opendata/zandmotor/morphology/jetski",meta:null,map:null}},mounted:function(){var t=this;fetch(this.baseUrl+"/meta.json").then(function(t){return t.json()}).then(function(e){t.meta=e,p.a.nextTick(function(){y.a.each(t.meta,function(e,a){var s="#morphology-"+a,n=t.$el.querySelector(s),o=n.children,i=B()(o,3),r=i[0],l=i[1],c=i[2];e.width=500,e.height=625,e.video=r,e.source=l,e.dest=c,e.ctxSrc=l.getContext("2d"),e.ctxDest=c.getContext("2d"),e.id="morphology-canvas-"+a;var d={name:"Jetski-"+a,active:!1,visibility:"none",id:e.id,type:"raster",icon:"filter_drama",source:{type:"canvas",animate:!0,canvas:e.id,coordinates:[[e.extent[0],e.extent[1]],[e.extent[2],e.extent[1]],[e.extent[2],e.extent[3]],[e.extent[0],e.extent[3]]]},paint:{}};e.layer=d,console.log("layer",d),t.publishLayers()}),t.animate()})})},methods:{deferredMountedTo:function(t){this.map=t,this.publishLayers()},animate:function(){requestAnimationFrame(this.animate),y.a.each(this.meta,function(t){t.ctxSrc.drawImage(t.video,0,0,t.width,2*t.height);for(var e=t.width*t.height,a=t.ctxSrc.getImageData(0,0,t.width,2*t.height),s=0;s<e;s++){var n=(a.data[4*s+0],a.data[4*s+1],a.data[4*s+2],a.data[4*s+4*e]>100?0:255);a.data[4*s+3]=n}t.ctxDest.putImageData(a,0,0)})},publishLayers:function(){var t=this;null!=this.map&&y.a.each(this.meta,function(e){t.map.addLayer(e.layer),f.$emit("add-layer",e.layer)})}}},I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hidden"},t._l(t.meta,function(e,s){return a("div",{attrs:{id:"morphology-"+s}},[a("video",{staticClass:"hidden",attrs:{width:500,height:1250,src:t.baseUrl+"/"+e.mp4,autoplay:"",loop:"",crossorigin:"anonymous"}}),t._v(" "),a("canvas",{staticClass:"source hidden",attrs:{width:500,height:1250}}),t._v(" "),a("canvas",{staticClass:"dest",attrs:{width:500,height:625,id:"morphology-canvas-"+s}})])}))},q=[],C={render:I,staticRenderFns:q},S=C,N=a("VU/8"),M=s,O=N(E,S,!1,M,"data-v-e38d90c0",null),R=O.exports,A=a("fZjL"),$=a.n(A),D=a("PJh5"),U=a.n(D),H=(a("7t+N"),a("1e2d"),{name:"app",data:function(){return{map:null,drawer:!1,fixed:!1,showSettings:!1,items:[{icon:"bubble_chart",title:"Inspire"}],layers:[],jsondata:"None",msg:"",timeStart:null,timeEnd:null,plots:[]}},mounted:function(){var t=this;f.$on("select-layers",function(e){p.a.set(t,"layers",e)}),f.$on("add-layer",function(e){t.layers.push(e)}),f.$on("click-plots",function(e){p.a.set(t,"plots",e)}),f.$on("map-loaded",function(e){p.a.set(t,"map",e.target)}),this.$refs.map.$on("mb-load",function(e){f.$emit("map-loaded",e),r(t.$refs.map.map,t.layers),m(t.$refs.map.map,t.layers),n(t.$refs.map.map,t.layers),t.map.on("mousemove",function(e){t.$refs.map.map.getCanvas().style.cursor="",void 0!==t.map.queryRenderedFeatures(e.point)[0]&&(t.$refs.map.map.getCanvas().style.cursor="pointer")}),t.map.on("click",function(e){var a=e.lngLat.lng,s=e.lngLat.lat,n=t.layers.find(function(t){return"meteo-layer"===t.id}),i=n.source.coordinates[0][0],r=n.source.coordinates[1][0],c=n.source.coordinates[2][1],d=n.source.coordinates[0][1];if(a<=r&&s<=d&&a>=i&&s>=c){var m=[],u=["Barometer_Avg","WindSpeed_Avg","RelHumidity_Avg"];_.each(u,function(e){t.plots.push(e),m.push("plot_"+e),f.$emit("click-plots",t.plots)}),l(m)}var p=t.map.queryRenderedFeatures(e.point);_.each(p,function(e){if("Morphology"==e.layer.id){var a=e.properties.id;t.plots.push(a),f.$emit("click-plots",t.plots)}else if("aeolian-layer"==e.layer.id){var a="Particle_"+e.properties.location_ID;t.plots.push(a),f.$emit("click-plots",t.plots),console.log("plot_"+a),o(e,"plot_"+a)}})})})},methods:{removePlot:function(t){var e=this.plots.indexOf(t);this.plots.splice(e,1),f.$emit("click-plots",this.plots)}},components:{"layer-control":L,"morphology-canvas":R}}),T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-navigation-drawer",{attrs:{fixed:"",temporary:"",clipped:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-toolbar",{attrs:{flat:""}},[a("v-list",[a("v-list-tile",[a("v-list-tile-title",{staticClass:"title"},[t._v("\n            Layers\n          ")])],1)],1)],1),t._v(" "),a("layer-control",{attrs:{layers:t.layers,map:t.map}})],1),t._v(" "),a("v-toolbar",{attrs:{light:"",app:"","clipped-left":"",fixed:""}},[a("v-toolbar-title",{staticClass:"ml-0 pl-3"},[a("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v("\n      Zandmotor data\n    ")],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{icon:"",large:""}},[a("v-avatar",{attrs:{size:"32px",tile:""}},[a("img",{attrs:{src:"http://www.dezandmotor.nl/assets/images/logo-de-zandmotor.png",alt:"Logo"}})])],1)],1),t._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{fluid:"",row:"",wrap:"","justify-space-between":""}},[a("v-flex",{attrs:{sm12:"","mb-2":""}},[a("h1",{attrs:{id:"message"}},[t._v(t._s(t.msg))]),t._v(" "),a("v-card",{attrs:{id:"map"}},[a("v-card-text",[a("v-mapbox",{ref:"map",attrs:{"access-token":"pk.eyJ1Ijoic2lnZ3lmIiwiYSI6Il8xOGdYdlEifQ.3-JZpqwUa3hydjAJFXIlMA","map-style":"mapbox://styles/mapbox/satellite-streets-v10",center:[4.186,52.05],zoom:13.16,pitch:5,bearing:-0,"min-zoom":5,id:"map"}},[a("canvas",{attrs:{id:"windsock-canvas",width:"200",height:"200"}}),t._v(" "),a("morphology-canvas")],1)],1)],1)],1),t._v(" "),t._l(t.plots,function(e){return a("v-card",{key:e,staticClass:"mb-1 mr-1",attrs:{id:"card_"+e}},[a("v-card-actions",[a("v-btn",{attrs:{flat:"",icon:""},on:{click:function(a){t.removePlot(e,a)}}},[a("v-icon",[t._v("close")])],1)],1),t._v(" "),a("v-card-text",[a("div",{staticClass:"plot-container bk-root",attrs:{id:"plot_"+e}})])],1)})],2)],1)],1)],1)},V=[],X={render:T,staticRenderFns:V},W=X,J=a("VU/8"),Z=u,G=J(H,W,!1,Z,null,null),K=G.exports,Y=a("5BM0"),Q=a.n(Y);a("7zck");p.a.use(Q.a),p.a.use(v.a),p.a.config.productionTip=!1,new p.a({el:"#app",template:"<App/>",components:{App:K}})},Zn8a:function(t,e){},uTBe:function(t,e){},uslO:function(t,e,a){function s(t){return a(n(t))}function n(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};s.keys=function(){return Object.keys(o)},s.resolve=n,t.exports=s,s.id="uslO"}},["NHnr"]);
//# sourceMappingURL=app.ef26f50b8189596dcfe9.js.map