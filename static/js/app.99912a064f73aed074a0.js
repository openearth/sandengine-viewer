webpackJsonp([1],{"5W1q":function(e,t){},"5h6Y":function(e,t){},"7zck":function(e,t){},NHnr:function(e,t,a){"use strict";function n(e){a("jHAF")}function i(e){a("Zn8a")}function o(e){a("TPDC")}function s(e,t,a,n,i){r(t,i,20,a,n)}function r(e,t,a,n,i){_.each(e,function(e){var o={polyline:e,dataset:t,begin_date:n,end_date:i,scale:a};console.log(o);new Headers;return fetch("http://hydro-engine.appspot.com/get_raster_profile",{method:"POST",body:N()(o),mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){return l(t,o,N()(e)),t})})}function l(e,t,a){console.log(a);var n=document.getElementById("plot_"+a),i=Bokeh.Plotting,o=t.begin_date,s=t.end_date,r=new Bokeh.GeoJSONDataSource({geojson:N()(e)});if(void 0!=Bokeh.index[a])var l=Bokeh.index[a].model,c=Me[Bokeh.index[a].model._legend.attributes.items.length];else var l=new i.figure({name:a,id:a,title:t.dataset,tools:"pan,crosshair,wheel_zoom,box_zoom,reset,save",width:800,height:350,background_fill_color:"#F2F2F7",x_axis_label:"Distance w.r.t. first coordinate [m]",y_axis_label:"Elevation [m, NAP]"}),c=Me[0];if(l.line({field:"distance"},{field:"b1_mean"},{source:r,legend:o.format(Fe)+" to "+s.format(Fe),line_width:2,line_color:c}),void 0==Bokeh.index[a]){var d=new Bokeh.Document;d.add_root(l),Bokeh.embed.add_document_standalone(d,n)}}function c(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2010-01-01",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"2018-01-01",i=U()(a),o=U()(n),s=o.diff(i,"day");d({dataset:"bathymetry_jetski",begin_date:i,end_date:o,step:s,interval:s,unit:"day"},e,t)}function d(e,t,a){return fetch("http://hydro-engine.appspot.com/get_image_urls",{method:"POST",body:N()(e),mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return f(e,t,a),e})}function f(e,t,a){var n=a.find(function(e){return"Jetski"===e.name});if(void 0===n){var n={name:"Jetski",active:!1,icon:"landscape",data:[],type:"group",id:"Jetski",range:"-12 7","z-order":0,css:"background: linear-gradient(to right, #000033,#000037,#00003a,#00003e,           #000042,#000045,#000049,#00004d,#000050,#000054,#000057,#00005b,#00005f,          #000062,#000066,#010268,#03036a,#04056c,#05076e,#070971,#080a73,#0a0c75,          #0b0e77,#0c1079,#0e117b,#0f137d,#10157f,#121781,#131884,#141a86,#161c88,          #171e8a,#191f8c,#1a218e,#1b2390,#1d2492,#1e2695,#1f2897,#212a99,#222b9b,          #242d9d,#252f9f,#2a35a2,#2e3ca6,#3342a9,#3848ac,#3c4faf,#4155b3,#465cb6,          #4a62b9,#4f68bc,#546fc0,#5875c3,#5d7bc6,#6282ca,#6688cd,#6b8fd0,#7095d3,          #749bd7,#79a2da,#7ea8dd,#82aee0,#87b5e4,#8cbbe7,#90c2ea,#95c8ed,#9acef1,          #9ed5f4,#a3dbf7,#a8e1fa,#9edef7,#94daf4,#8ad6f0,#80d2ed,#84cacb,#87c2a9,          #8bba87,#8eb166,#92a944,#95a122,#999900,#a4a50b,#afb116,#babd21,#c5c92c,          #d0d537,#dce142,#e7ec4d,#f2f857,#f3f658,#f3f359,#f4f15a,#f5ee5b,#f6eb5c,          #f6e95d,#f7e65d,#f8e35e,#f9e15f,#fade60,#fadc61,#fbd962,#fcd663,#fdd463,          #fdd164,#fecf65,#ffcc66,#fdc861,#fcc55d,#fbc158,#f9be53,#f7ba4f,#f6b64a,          #f5b346,#f3af41,#f1ac3c,#f0a838,#efa433,#eda12e,#eb9d2a,#ea9a25,#e99620,          #e7931c,#e58f17,#e48b13,#e3880e,#e18409,#df8105,#de7d00);",info:"Zandmotor bathymetric and topographic survey, gridded on 20m grid. <a href='https://data.4tu.nl/repository/uuid:c40da555-3eff-4c3c-89d6-136994a07120'>Data link</a>"};a.push(n)}else _.each(n.data,function(e){t.removeLayer(e.id)}),n.data=[];_.each(e,function(e){var a=e.mapid,i=e.token,o=u(a,i),s={id:a,name:"jetski",type:"raster",layout:{visibility:"none"},source:{type:"raster",tiles:[o],tileSize:256}};t.addLayer(s),n.data.push(s)}),R.$emit("select-layers",a)}function u(e,t){var a=["https://earthengine.googleapis.com/map",e,"{z}","{x}","{y}"].join("/");return a+="?token="+t}function p(e,t){m({dataset:"bathymetry_lidar",begin_date:"2010-08-01",end_date:"2012-09-01",step:30,interval:30,unit:"day"},e,t)}function m(e,t,a){return fetch("http://hydro-engine.appspot.com/get_image_urls",{method:"POST",body:N()(e),mode:"cors",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return h(e,t,a),e})}function h(e,t,a){var n={name:"LiDAR elevation [m, NAP]",active:!1,icon:"fa-plane",data:[],type:"group",range:"-12 7",id:"Lidar",css:"background: linear-gradient(to right, #000033,#000037,#00003a,#00003e,         #000042,#000045,#000049,#00004d,#000050,#000054,#000057,#00005b,#00005f,        #000062,#000066,#010268,#03036a,#04056c,#05076e,#070971,#080a73,#0a0c75,        #0b0e77,#0c1079,#0e117b,#0f137d,#10157f,#121781,#131884,#141a86,#161c88,        #171e8a,#191f8c,#1a218e,#1b2390,#1d2492,#1e2695,#1f2897,#212a99,#222b9b,        #242d9d,#252f9f,#2a35a2,#2e3ca6,#3342a9,#3848ac,#3c4faf,#4155b3,#465cb6,        #4a62b9,#4f68bc,#546fc0,#5875c3,#5d7bc6,#6282ca,#6688cd,#6b8fd0,#7095d3,        #749bd7,#79a2da,#7ea8dd,#82aee0,#87b5e4,#8cbbe7,#90c2ea,#95c8ed,#9acef1,        #9ed5f4,#a3dbf7,#a8e1fa,#9edef7,#94daf4,#8ad6f0,#80d2ed,#84cacb,#87c2a9,        #8bba87,#8eb166,#92a944,#95a122,#999900,#a4a50b,#afb116,#babd21,#c5c92c,        #d0d537,#dce142,#e7ec4d,#f2f857,#f3f658,#f3f359,#f4f15a,#f5ee5b,#f6eb5c,        #f6e95d,#f7e65d,#f8e35e,#f9e15f,#fade60,#fadc61,#fbd962,#fcd663,#fdd463,        #fdd164,#fecf65,#ffcc66,#fdc861,#fcc55d,#fbc158,#f9be53,#f7ba4f,#f6b64a,        #f5b346,#f3af41,#f1ac3c,#f0a838,#efa433,#eda12e,#eb9d2a,#ea9a25,#e99620,        #e7931c,#e58f17,#e48b13,#e3880e,#e18409,#df8105,#de7d00);",info:"Elevation measurements of the dutch coast done with LIDAR. <a href='https://data.4tu.nl/repository/uuid:8a8a91bc-e520-4d19-a127-5fd2232cc58e'>Data link</a>"};_.each(e,function(e){var a=e.mapid,i=e.token,o=v(a,i),s={id:a,name:"lidar",type:"raster",active:!0,layout:{visibility:"visible"},source:{type:"raster",tiles:[o],tileSize:256},paint:{}};t.addLayer(s),n.data.push(s)}),a.push(n),R.$emit("select-layers",a)}function v(e,t){var a=["https://earthengine.googleapis.com/map",e,"{z}","{x}","{y}"].join("/");return a+="?token="+t}function b(e,t){var a={id:"ADCP",active:!0,visibility:"visible",name:"ADCP",type:"circle",icon:"grain","icon-image":"static/adcp.png",source:{type:"geojson",data:"static/adcp_locations.geojson"},info:"Measurment from an Acoustic Doppler Current Profilers (ADCP) located at the Sand Motor. <a href='https://data.4tu.nl/repository/uuid:3bc3591b-9d9e-4600-8705-5b7eba6aa3ed'>Data link</a>",paint:{"circle-radius":{base:1.2,stops:[[12,2],[22,180]]},"circle-color":"FireBrick"}};e.addLayer(a),t.push(a),R.$emit("select-layers",t)}function y(e,t){var a=e.properties.ADCPID;fetch("https://s3-eu-west-1.amazonaws.com/deltares-opendata/zandmotor/adcp/"+a+"_data.json").then(function(e){return e.json()}).then(function(n){g("velocity",a,n,e,t[0]),g("waterdepth",a,n,e,t[1])}).catch(function(e){console.warn(e)})}function g(e,t,a,n,i){if(null==a)return console.log("No timeseries defined"),-1;var o=document.getElementById(i);o.innerHTML="";var s=Bokeh.Plotting;if("velocity"==e)var r=["Umean","Vmean"],l=t+" depth averaged velocity",c="Current velocity [m/s]";else var r=["waterdepth"],l=t+" water depth (Scheveningen)",c="Water level [m, NAP]";for(var d=new s.figure({title:l,tools:"pan,crosshair,wheel_zoom,box_zoom,reset,save",width:1e3,height:350,x_axis_type:"datetime",x_axis_label:"Time",y_axis_label:c,background_fill_color:"#F2F2F7"}),f=a.time,u=["MidnightBlue","ForestGreen"],p=0;p<r.length;p++){var m=a[r[p]],h=new Bokeh.ColumnDataSource({data:{x:f,y:m}});d.line({field:"x"},{field:"y"},{source:h,legend:r[p],line_color:u[p],line_width:2})}d._legend.location="top_left";var v=new Bokeh.Document;v.add_root(d),Bokeh.embed.add_document_standalone(v,o)}function j(e,t){var a={id:"Aeolian",active:!0,visibility:"visible",name:"Aeolian transport",type:"circle",cursor:"pointer",icon:"grain",source:{type:"geojson",data:"static/aeolian_data.geojson"},info:"Processed data on aeolian sediment transport from the 6-week MegaPeX field campaign at the Sand Motor mega nourishment. <a href='https://data.4tu.nl/repository/uuid:3bc3591b-9d9e-4600-8705-5b7eba6aa3ed'>Data link</a>",paint:{"circle-radius":{base:1.75,stops:[[12,2],[22,80]]},"circle-color":["match",["get","deploymentName"],"dn1","#fbb03b","dn2","#223b53","dn3","#e55e5e","dn4","#3bb2d0","dn5","#956a37","dn6","#8a5f2c","dn7","#815726","dn8","#724c20","dn9","#66451f","dn10","#2f1b02","dn11","#201503","dn67","#453c09","#ccc"]}};e.addLayer(a),t.push(a),R.$emit("select-layers",t)}function x(e,t){var a=e[0].unix(),n=e[1].unix(),i=["all",[">=","tStart",a],["<=","tEnd",n]];t.setFilter("Aeolian",i)}function w(e,t){var a=e.properties.deploymentName,n=e.properties.location_ID,i=U.a.unix(parseFloat(e.properties.timeEnd)),o=U.a.unix(parseFloat(e.properties.timeStart));fetch("https://s3-eu-west-1.amazonaws.com/deltares-opendata/zandmotor/aeolian/aeolian_data_"+a+".json").then(function(e){return e.json()}).then(function(s){n=n,a=a,s=s,i=i.format("L"),o=o.format("L"),k(n,a,s,i,o,e,t)}).catch(function(e){console.warn(e)})}function k(e,t,a,n,i,o,s){if(null==a)return console.log("No timeseries defined"),-1;var r=document.getElementById(s);r.innerHTML="";var l=Bokeh.Plotting,c=a[t],d=q()(c),f=c[d[0]];f=f.map(function(e){return 1e3*e});for(var u=U.a.unix(parseFloat(f[0]/1e3)).format("L"),p=U.a.unix(parseFloat(f[f.length-1]/1e3)).format("L"),m=new l.figure({title:"Deployment: "+t+" Location: "+e+" Start deployment: "+u+" End deployment: "+p,tools:"pan,crosshair,wheel_zoom,box_zoom,reset,save",width:800,height:350,x_axis_type:"datetime",x_axis_label:"Time",y_axis_label:"Number of particles [-]",background_fill_color:"#F2F2F7"}),h=c[e],v=q()(h),b=["#666699","#66ff66","#ff6666"],y=0;y<v.length;y++){var g=function(e,t,a){return j[t]>0},_="height "+h[v[y]].height.toString()+" m",j=c[e][v[y]].particle_counts,x=f.filter(g),w=j.filter(g),k=new Bokeh.ColumnDataSource({data:{x:x,y:w}});m.line({field:"x"},{field:"y"},{source:k,legend:_,line_color:b[y],line_width:2})}m._legend.location="top_left";var D=new Bokeh.Document;D.add_root(m),Bokeh.embed.add_document_standalone(D,r)}function D(e,t){var a={active:!1,name:"Drifters",icon:"explore",id:"Drifters",visibility:"visible",type:"line",source:{type:"geojson",data:"https://s3-eu-west-1.amazonaws.com/deltares-opendata/zandmotor/drifters/drifters.geojson"},info:"Drifter data as measured with GPS-tracked drifters during the megapex 2014 field campaign. Experiments have been done during ebb and flood and in a rip current. <a href='https://data.4tu.nl/repository/uuid:7f190c88-ae2e-43cf-959c-2b7d5c321573'>Data link</a>",paint:{"line-color":["get","color"],"line-width":{base:4,stops:[[12,2],[22,180]]}}};e.addLayer(a),t.push(a),R.$emit("select-layers",t)}function z(e,t){var a=e[0].unix(),n=e[1].unix(),i=["all",[">=","tStart",a],["<=","tEnd",n]];t.setFilter("Drifters",i)}function P(e,t){fetch("static/wind_data.json").then(function(e){return e.json()}).then(function(a){M(a,t,e),C(a)})}function F(e){fetch("https://s3-eu-west-1.amazonaws.com/deltares-opendata/zandmotor/meteo/meteo_data_test1.json").then(function(e){return e.json()}).then(function(t){S("WindSpeed_Avg",document.getElementById(e[0]),t),S("RelHumidity_Avg",document.getElementById(e[1]),t)}).catch(function(e){console.warn(e)})}function M(e,t,a){var n=e.lat,i=e.lon,o={name:"Meteo",active:!1,visibility:"none",id:"Meteo",type:"raster",icon:"filter_drama",css:"",range:"",source:{type:"canvas",animate:!0,canvas:"windsock-canvas",coordinates:[[i-.003,n+.003],[i+.003,n+.003],[i+.003,n-.003],[i-.003,n-.003]]},info:"Meteo measurements at the Sand Motor. Air temperature, humidity, pressure, solar radiation, precipitation, wind speed and wind direction are measured. <a href='https://data.4tu.nl/repository/uuid:b7aac156-73d4-4b62-bad4-508c95de8331'>Data link</a>",paint:{}};a.addLayer(o),t.push(o),R.$emit("select-layers",t)}function C(e){function t(){var n=e.direc,i=e.aspeed[a],o=document.getElementById("windsock-canvas").getContext("2d"),s=100;o.clearRect(0,0,200,200),o.shadowColor="#333",o.shadowBlur=10,o.shadowOffsetX=5,o.shadowOffsetY=5,o.beginPath(),o.arc(s,s,10,0,2*Math.PI),o.fillStyle="black",o.fill(),o.closePath(),o.beginPath(),o.moveTo(80,80),o.lineTo(s,s),o.lineTo(120,80),o.stroke(),o.closePath();var r=[[0,80,70,40,10,"red"],[2,80,60,40,10,"white"],[4,80,50,40,10,"red"],[6,80,40,40,10,"white"],[8,80,30,40,10,"red"]],l=_.filter(r,function(e){var t=e[0];return i>t});_.each(l,function(e){o.beginPath(),o.fillStyle=e[5],o.rect(e[1],e[2],e[3],e[4]),o.fill(),o.closePath()}),o.translate(100,100),o.rotate(-(180-n[a-1])*(2*Math.PI/360)),o.rotate((180-n[a])*(2*Math.PI/360)),o.translate(-100,-100),a+=1;new Date(e.time[a]);requestAnimationFrame(t)}var a=0;t()}function S(e,t,a){var n=Bokeh.Plotting,i=a[e].slice(0,1e5);i=_.map(i,function(e){return-999==e?NaN:e});var o=[];_.each(a.time.slice(0,1e5),function(e){o.push(new Date(e))});var s=new Bokeh.ColumnDataSource({data:{x:o,y:i}}),r={};r.RelHumidity_Avg="Relative Humidity [%]",r.WindSpeed_Avg="Wind speed 44 m above surface [m/s]";var l=new n.figure({title:e,tools:"pan,crosshair,wheel_zoom,box_zoom,reset,save",width:1e3,height:350,x_axis_type:"datetime",x_axis_label:"Time",y_axis_label:r[e],background_fill_color:"#F2F2F7"});l.line({field:"x"},{field:"y"},{source:s,legend:e,line_color:"#666699",line_width:2});l._legend.location="top_left";var c=new Bokeh.Document;c.add_root(l),Bokeh.embed.add_document_standalone(c,t)}function B(e,t){var a={name:"Sediment D50 [µm]",active:!1,visibility:"None",icon:"grain",id:"Sediment",type:"circle",source:{type:"geojson",data:"static/sediment_data.geojson"},range:"0  400",css:"background: linear-gradient(to right,       hsla(0, 100%, 50%, 0.5),       rgba(255, 255, 0, 0.5));",info:"Sediment sampling data from measurement campaign at the Sand Motor. <a href='https://data.4tu.nl/repository/uuid:598c390b-2368-4670-bc8c-d0b3ae09dd79'>Data link</a>",paint:{"circle-color":{base:1,type:"exponential",property:"D50",stops:[[0,"hsla(0, 100%, 50%, 0.5)"],[400,"rgba(255, 255, 0, 0.5)"]],default:"hsl(0, 0%, 0%)"},"circle-stroke-width":.5}};e.addLayer(a),t.push(a),R.$emit("select-layers",t),R.$emit("add-legend","test")}function E(e,t){var a=e[0].unix(),n=e[1].unix(),i=["all",[">=","time",a],["<=","time",n]];t.setFilter("Sediment",i)}function L(e){a("bwzN")}Object.defineProperty(t,"__esModule",{value:!0});var $=(a("j1ja"),a("7+uW")),A=a("3EgV"),I=a.n(A),O=a("mvHQ"),N=a.n(O),T=a("fZjL"),q=a.n(T),R=new $.a,H=(a("uTBe"),a("uZ0T")),Y=(a("5h6Y"),a("PJh5")),U=a.n(Y),V=a("M4fF"),W=a.n(V),J=a("OVoi"),X=a.n(J),G={name:"layer-control",props:{layers:{type:Array,required:!0},map:{type:Object}},data:function(){return{btnInfo:null}},mounted:function(){},watch:{layers:{handler:function(e){this.toggleLayers()},deep:!0}},methods:{addInfoCard:function(e){var t=U()(new Date).unix(),a=e+"_"+t,n=new X.a;fetch(R.$emit("add-card",a)).then(function(t){var i=document.getElementById("plot_"+a);i.style.width="500px",i.style.heigth="300px",console.log(i),fetch("http://raw.githubusercontent.com/wiki/openearth/sandmotor-viewer/"+e+".md",{mode:"cors"}).then(function(e){return e.text()}).then(function(e){i.innerHTML=n.render(e)})})},toggleLayers:function(){var e=this;W.a.isNil(this.map)||W.a.each(this.layers,function(t){var a="none";t.active&&(a="visible"),"group"===t.type?W.a.each(t.data,function(t){e.map.setLayoutProperty(t.id,"visibility",a)}):e.map.setLayoutProperty(t.id,"visibility",a)})}}},Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"layer-control"},e._l(e.layers,function(t){return a("v-list",{key:t.id,attrs:{dense:"","pt-0":""}},[a("v-list-tile",[a("v-list-tile-action",[a("v-switch",{model:{value:t.active,callback:function(a){e.$set(t,"active",a)},expression:"layer.active"}})],1),e._v(" "),a("v-list-tile-title",[e._v(e._s(t.name))]),e._v(" "),a("v-list-tile-action",{staticStyle:{display:"-webkit-box"}},[a("v-icon",[e._v(e._s(t.icon))]),e._v(" "),a("v-btn",{staticStyle:{"min-width":"30px"},attrs:{small:""},nativeOn:{click:function(a){e.addInfoCard(t.id)}}},[a("v-icon",[e._v("fa-question")])],1)],1)],1),e._v(" "),a("div",{staticClass:"bar-wrapper"},[t.css?a("div",{staticClass:"bar",style:t.css}):e._e(),e._v(" "),a("div",{staticClass:"bartext"},[e._v(e._s(t.range)+" "),a("span",{staticClass:"barspan"})]),e._v(" "),a("div",{staticClass:"information",domProps:{innerHTML:e._s(t.info)}},[e._v(e._s(t.info)+" ")])])],1)}))},K=[],Q={render:Z,staticRenderFns:K},ee=Q,te=a("VU/8"),ae=n,ne=te(G,ee,!1,ae,"data-v-73ada5d2",null),ie=ne.exports,oe=a("d7EF"),se=a.n(oe),re={name:"morphology-canvas",data:function(){return{baseUrl:"https://s3-eu-west-1.amazonaws.com/deltares-opendata/zandmotor/morphology/jetski",meta:null,map:null}},mounted:function(){var e=this;fetch(this.baseUrl+"/meta.json").then(function(e){return e.json()}).then(function(t){e.meta=t,$.a.nextTick(function(){W.a.each(e.meta,function(t,a){var n="#morphology-"+a,i=e.$el.querySelector(n),o=i.children,s=se()(o,3),r=s[0],l=s[1],c=s[2];t.width=500,t.height=625,t.video=r,t.source=l,t.dest=c,t.ctxSrc=l.getContext("2d"),t.ctxDest=c.getContext("2d"),t.id="morphology-canvas-"+a;var d={name:"Jetski-"+a,active:!1,visibility:"none",id:t.id,type:"raster",icon:"filter_drama",source:{type:"canvas",animate:!0,canvas:t.id,coordinates:[[t.extent[0],t.extent[1]],[t.extent[2],t.extent[1]],[t.extent[2],t.extent[3]],[t.extent[0],t.extent[3]]]},paint:{}};t.layer=d,console.log("layer",d),e.publishLayers()}),e.animate()})})},methods:{deferredMountedTo:function(e){this.map=e,this.publishLayers()},animate:function(){requestAnimationFrame(this.animate),W.a.each(this.meta,function(e){e.ctxSrc.drawImage(e.video,0,0,e.width,2*e.height);for(var t=e.width*e.height,a=e.ctxSrc.getImageData(0,0,e.width,2*e.height),n=0;n<t;n++){var i=(a.data[4*n+0],a.data[4*n+1],a.data[4*n+2],a.data[4*n+4*t]>100?0:255);a.data[4*n+3]=i}e.ctxDest.putImageData(a,0,0)})},publishLayers:function(){var e=this;null!=this.map&&W.a.each(this.meta,function(t){e.map.addLayer(t.layer),R.$emit("add-layer",t.layer)})}}},le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hidden"},e._l(e.meta,function(t,n){return a("div",{attrs:{id:"morphology-"+n}},[a("video",{staticClass:"hidden",attrs:{width:500,height:1250,src:e.baseUrl+"/"+t.mp4,autoplay:"",loop:"",crossorigin:"anonymous"}}),e._v(" "),a("canvas",{staticClass:"source hidden",attrs:{width:500,height:1250}}),e._v(" "),a("canvas",{staticClass:"dest",attrs:{width:500,height:625,id:"morphology-canvas-"+n}})])}))},ce=[],de={render:le,staticRenderFns:ce},fe=de,ue=a("VU/8"),pe=i,me=ue(re,fe,!1,pe,"data-v-e38d90c0",null),he=(me.exports,a("7t+N")),ve=a.n(he),be=(a("w+/p"),a("5W1q"),{name:"time-slider",props:{showPlay:{type:Boolean,default:!0},extent:{type:Array,default:function(){var e=U()();return[U()("20110301","YYYYMMDD"),e]}}},data:function(){return{configDialog:!1,startDateMenu:!1,endDateMenu:!1,startDate:this.extent[0].format("Y-MM-DD"),endDate:this.extent[1].format("Y-MM-DD"),loopDuration:20,maxFps:10,last:null,loop:!0,state:"paused",slider:null}},mounted:function(){var e=this;$.a.nextTick(function(){var t=e.$el.querySelector("input.slider");ve()(t).ionRangeSlider({type:"double",drag_interval:!0,min:0,max:1,step:.001,grid:!1,hide_min_max:!0,onFinish:function(t){e.$emit("time-extent-update",e.currentExtent)},onUpdate:function(t){e.$emit("time-extent-update",e.currentExtent)},prettify:function(t){return e.dateFormat(t)}}),e.slider=ve()(t).data("ionRangeSlider"),e.step()})},watch:{extent:function(e){this.slider.dragging||this.slider.update({from:0,to:1})}},methods:{pause:function(){this.state="paused"},play:function(){this.last=performance.now(),this.state="playing"},step:function(e){if(requestAnimationFrame(this.step),!this.last)return void(this.last=e);if("playing"===this.state){var t=(e-this.last)/1e3;if(!(t<1/this.maxFps)){var a=t/this.loopDuration,n={from:W.a.clamp(this.slider.result.from+a,0,1),to:W.a.clamp(this.slider.result.to+a,0,1)};if(1==n.to){if(!this.loop)return;n.to=n.to-n.from,n.from=0}this.slider.update(n),this.last=e}}},dateByFraction:function(e){var t=U()(this.startDate),a=U()(this.endDate),n=a.diff(t);return t.clone().add(n*e,"ms")},dateFormat:function(e){return this.dateByFraction(e).format("Y-MM-DD")},deferredMountedTo:function(e){}},computed:{currentTime:function(){return this.dateByFraction(this.slider.result.to)},currentExtent:function(){return[this.dateByFraction(this.slider.result.from),this.dateByFraction(this.slider.result.to)]},allowedDates:function(){return{min:this.extent[0].format("Y-MM-DD"),max:this.extent[1].format("Y-MM-DD")}}}}),ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-toolbar",{staticClass:"time-slider",attrs:{color:"white",floating:"",dense:"",role:"slider"}},[a("div",{staticClass:"time-slider-wrapper"},[a("input",{staticClass:"slider",attrs:{type:"text",name:"slider",value:""}})]),e._v(" "),e.showPlay?a("v-btn-toggle",{attrs:{mandatory:""},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}},[a("v-btn",{attrs:{value:"playing",flat:""},on:{click:function(t){t.stopPropagation(),e.play(t)}}},[a("v-icon",[e._v("fa-play")])],1),e._v(" "),a("v-btn",{attrs:{value:"paused",flat:""},on:{click:function(t){t.stopPropagation(),e.pause(t)}}},[a("v-icon",[e._v("fa-pause")])],1)],1):e._e(),e._v(" "),e.showPlay?a("v-btn-toggle",{model:{value:e.loop,callback:function(t){e.loop=t},expression:"loop"}},[a("v-btn",{attrs:{value:!0,flat:""}},[a("v-icon",[e._v("fa-repeat")])],1)],1):e._e(),e._v(" "),a("v-btn",{attrs:{icon:"",flat:""},on:{click:function(t){t.stopPropagation(),e.configDialog=!0}}},[a("v-icon",[e._v("fa-gear")])],1),e._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.configDialog,callback:function(t){e.configDialog=t},expression:"configDialog"}},[a("v-card",[a("v-card-text",[a("v-menu",{ref:"startDateMenu",attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","return-value":e.startDate},on:{"update:returnValue":function(t){e.startDate=t}},model:{value:e.startDateMenu,callback:function(t){e.startDateMenu=t},expression:"startDateMenu"}},[a("v-text-field",{attrs:{slot:"activator",label:"Picker in menu","prepend-icon":"event",readonly:""},slot:"activator",model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),e._v(" "),a("v-date-picker",{attrs:{"allowed-dates":e.allowedDates,"no-title":"",scrollable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.save,i=t.cancel;return[a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:i}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:n}},[e._v("OK")])],1)]}}]),model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),e._v(" "),a("v-menu",{ref:"endDateMenu",attrs:{lazy:"","close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":"","return-value":e.endDate},on:{"update:returnValue":function(t){e.endDate=t}},model:{value:e.endDateMenu,callback:function(t){e.endDateMenu=t},expression:"endDateMenu"}},[a("v-text-field",{attrs:{slot:"activator",label:"Picker in menu","prepend-icon":"event",readonly:""},slot:"activator",model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}}),e._v(" "),a("v-date-picker",{attrs:{"allowed-dates":e.allowedDates,"no-title":"",scrollable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.save,i=t.cancel;return[a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:i}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:n}},[e._v("OK")])],1)]}}]),model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1)],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){t.stopPropagation(),e.configDialog=!1}}},[e._v("Close")])],1)],1)],1)],1)},ge=[],_e={render:ye,staticRenderFns:ge},je=_e,xe=a("VU/8"),we=o,ke=xe(be,je,!1,we,null,null),De=ke.exports,ze=a("5BM0"),Pe=a.n(ze),Fe="Y-MM-DD";$.a.use(Pe.a);var Me=(new H({displayControlsDefault:!1,controls:{line_string:!0,trash:!0}}),["#ffffff","#e6e6ff","#ccccff","#b3b3ff","#9999ff","#8080ff","#6666ff","#4d4dff","#3333ff","#1a1aff","#0000ff","#0000e6","#0000cc","#0000b3","#000099","#000080","#000066","#00004d","#000033","#00001a","#000000"]),Ce=(a("1e2d"),new H({displayControlsDefault:!1,controls:{line_string:!0,trash:!0}})),Se={name:"app",data:function(){return{map:null,drawer:!1,fixed:!1,showSettings:!1,items:[{icon:"bubble_chart",title:"Inspire"}],layers:[],jsondata:"None",msg:"",timeExtent:[U()("20110301","YYYYMMDD"),U()()],plots:[],draws:[]}},mounted:function(){var e=this;R.$on("select-layers",function(t){$.a.set(e,"layers",t)}),R.$on("add-layer",function(t){e.layers.push(t)}),R.$on("add-card",function(t){e.plots.push(t)}),R.$on("click-plots",function(t){$.a.set(e,"plots",t)}),R.$on("map-loaded",function(t){$.a.set(e,"map",t.target)}),this.$refs.timeslider.$on("time-extent-update",function(t){e.timeExtent=t;for(var a=[],n=0;n<e.layers.length;n++)e.layers[n].active&&a.push(e.layers[n].id);a.indexOf("Drifters")>-1&&z(e.timeExtent,e.$refs.map.map),a.indexOf("Aeolian")>-1&&x(e.timeExtent,e.$refs.map.map),a.indexOf("Sediment")>-1&&(console.log("check"),E(e.timeExtent,e.$refs.map.map)),a.indexOf("Jetski")>-1&&c(e.$refs.map.map,e.layers,e.timeExtent[0],e.timeExtent[1]),s(e.$refs.map.map,e.draws,e.timeExtent[0],e.timeExtent[1],"bathymetry_jetski");for(var i=q()(Bokeh.index),o=1e3*e.timeExtent[0].unix(),r=1e3*e.timeExtent[1].unix(),n=0;n<i.length;n++){Bokeh.index[i[n]].model.attributes.renderers.map(function(e){return e.type}).indexOf("DatetimeAxis")>0&&(Bokeh.index[i[n]].model.x_range.start=o,Bokeh.index[i[n]].model.x_range.end=r)}}),this.$refs.map.$on("mb-load",function(t){R.$emit("map-loaded",t),e.$refs.map.map.addControl(Ce),P(e.$refs.map.map,e.layers),B(e.$refs.map.map,e.layers),j(e.$refs.map.map,e.layers),D(e.$refs.map.map,e.layers),p(e.$refs.map.map,e.layers),b(e.$refs.map.map,e.layers),c(e.$refs.map.map,e.layers),e.map.on("mousemove",function(t){e.$refs.map.map.getCanvas().style.cursor="",void 0!==e.map.queryRenderedFeatures(t.point)[0]&&(e.$refs.map.map.getCanvas().style.cursor="pointer")}),e.$refs.map.map.on("draw.create",function(){var t=Ce.getAll(),a=t.features[t.features.length-1].geometry,n=N()(a);e.draws.push(a),e.plots.push(n),R.$emit("click-plots",e.plots),s(e.$refs.map.map,e.draws,e.timeExtent[0],e.timeExtent[1],"bathymetry_jetski")}),e.map.on("click",function(t){var a=t.lngLat.lng,n=t.lngLat.lat;if("visible"===e.map.getLayer("Meteo").visibility){var i=e.layers.find(function(e){return"Meteo"===e.id}),o=i.source.coordinates[0][0],s=i.source.coordinates[1][0],r=i.source.coordinates[2][1],l=i.source.coordinates[0][1];if(a<=s&&n<=l&&a>=o&&n>=r){var c=[],d=["WindSpeed_Avg","RelHumidity_Avg"];_.each(d,function(t){e.plots.push(t),c.push("plot_"+t),R.$emit("click-plots",e.plots)}),F(c)}}var f=e.map.queryRenderedFeatures(t.point);_.each(f,function(t){if("Sediment"==t.layer.id);else if("Aeolian"==t.layer.id){var a="Particle_"+t.properties.deploymentName+"_"+t.properties.location_ID;e.plots.push(a),R.$emit("click-plots",e.plots),w(t,"plot_"+a)}else if("ADCP"==t.layer.id){var n=[],i=[t.properties.ADCPID+"_adcp-f-1",t.properties.ADCPID+"_adcp-f-2"];_.each(i,function(t){e.plots.push(t),n.push("plot_"+t),R.$emit("click-plots",e.plots)}),y(t,n)}})})})},methods:{removePlot:function(e){var t=this.plots.indexOf(e);this.plots.splice(t,1),R.$emit("click-plots",this.plots)}},components:{"layer-control":ie,"time-slider":De}},Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-navigation-drawer",{attrs:{fixed:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-toolbar",{attrs:{flat:""}},[a("v-list",[a("v-list-tile",[a("v-list-tile-title",{staticClass:"title"},[e._v("\n            Layers\n          ")])],1)],1)],1),e._v(" "),a("layer-control",{attrs:{layers:e.layers,map:e.map}})],1),e._v(" "),a("v-toolbar",{attrs:{light:"",app:"",clipped:"",fixed:""}},[a("v-toolbar-title",{staticClass:"ml-0 pl-3"},[a("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v("\n      Zandmotor data\n    ")],1),e._v(" "),a("time-slider",{ref:"timeslider",attrs:{"show-play":!1}}),e._v(" "),a("v-spacer"),e._v(" "),a("v-avatar",{attrs:{width:"64px"}},[a("a",{staticClass:"btn btn--flat btn--router",attrs:{icon:"",large:"",href:"http://www.dezandmotor.nl/en/",target:"parent"}},[a("img",{attrs:{src:"static/images/NatureCoastLogo.png",alt:"Logo"}})])]),e._v(" "),a("v-avatar",{attrs:{size:"64px"}},[a("a",{staticClass:"btn btn--flat btn--router",attrs:{icon:"",large:"",href:"http://www.stw.nl/en",target:"parent"}},[a("img",{attrs:{src:"static/images/STWlogo.png",alt:"Logo"}})])]),e._v(" "),a("v-avatar",{attrs:{size:"64px"}},[a("a",{staticClass:"btn btn--flat btn--router",attrs:{icon:"",large:"",href:"https://github.com/openearth/sandmotor-viewer",target:"parent"}},[a("img",{attrs:{src:"static/images/GitHub-Mark.png",alt:"Logo"}})])]),e._v(" "),a("a",{attrs:{href:"mailto:Arjen.Luijendijk@deltares.nlSubject=Contact%20Zandmotor%20data",target:"_top"}},[e._v("contact")])],1),e._v(" "),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{fluid:"",row:"",wrap:"","justify-space-between":""}},[a("v-flex",{attrs:{sm12:"","mb-2":""}},[a("v-card",{attrs:{id:"map"}},[a("v-card-text",[a("v-mapbox",{ref:"map",attrs:{"access-token":"pk.eyJ1Ijoic2lnZ3lmIiwiYSI6Il8xOGdYdlEifQ.3-JZpqwUa3hydjAJFXIlMA","map-style":"mapbox://styles/mapbox/satellite-streets-v10",center:[4.186,52.06],zoom:12.5,pitch:5,bearing:-0,"min-zoom":5,id:"map"}},[a("canvas",{attrs:{id:"windsock-canvas",width:"200",height:"200"}})])],1)],1)],1),e._v(" "),e._l(e.plots,function(t){return a("v-card",{key:t,staticClass:"mb-1 mr-1",attrs:{id:"card_"+t}},[a("v-card-actions",[a("v-btn",{attrs:{flat:"",icon:""},on:{click:function(a){e.removePlot(t,a)}}},[a("v-icon",[e._v("close")])],1)],1),e._v(" "),a("v-card-text",[a("div",{staticClass:"plot-container bk-root",attrs:{id:"plot_"+t}})])],1)})],2)],1)],1)],1)},Ee=[],Le={render:Be,staticRenderFns:Ee},$e=Le,Ae=a("VU/8"),Ie=L,Oe=Ae(Se,$e,!1,Ie,null,null),Ne=Oe.exports;a("7zck");$.a.use(Pe.a),$.a.use(I.a),$.a.config.productionTip=!1,new $.a({el:"#app",template:"<App/>",components:{App:Ne}})},TPDC:function(e,t){},Zn8a:function(e,t){},bwzN:function(e,t){},jHAF:function(e,t){},uTBe:function(e,t){},uslO:function(e,t,a){function n(e){return a(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id="uslO"}},["NHnr"]);
//# sourceMappingURL=app.99912a064f73aed074a0.js.map